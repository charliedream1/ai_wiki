# 资料

- A Multi-AI Agent System for Autonomous Optimization of Agentic AI Solutions via Iterative Refinement and LLM-Driven Feedback Loops
  - 2024.12.22
  - 美国
  - https://arxiv.org/html/2412.17149v1

# 原理

什么是自主优化的多AI智能体系统？
先来说说这个系统的概念吧。我们知道，AI智能体就像是一个个小能手，它们可以完成各种任务。而这个多AI智能体系统呢，就是把这些小能手组织起来，让它们协同工作，去处理一些复杂的流程。比如在市场调研、业务流程优化、产品推荐这些领域，都能看到它们的身影。
但是呢，以前这些系统想要优化，就得靠人工去一点点调整，费时费力。而现在，有了这个自主优化的系统，它就能自动地去优化自己，不需要人工干预。

自主优化是如何实现的？
自主优化的多AI智能体系统实现起来可不简单，这里面涉及到一系列复杂而精妙的机制。关键就在于它的迭代反馈循环和LLM（大型语言模型）驱动的机制，以及各个智能体在不同阶段的协同工作。

系统架构与智能体分工
这个系统采用了精心设计的架构，里面包含了多个各司其职的智能体，它们在精细化（Refinement）、执行（Execution）、评估（Evaluation）、修改（Modification）和文档化（Documentation）这几个关键环节中发挥着重要作用。

精细化智能体（Refinement Agent）
它是整个优化过程的“总指挥”，负责统筹安排任务，把任务分配给其他智能体，并且根据评估结果提出改进系统的假设。它会仔细分析智能体的输出，对照定性和定量的评估标准，找出系统在角色、任务或流程上可以改进的地方。比如，如果发现某个智能体的输出在相关性上得分不高，它就会提出可能的改进方向，像调整该智能体的任务重点或者优化它的信息获取渠道等。

假设生成智能体（Hypothesis Generation Agent）
这个智能体是“创意源泉”，它基于精细化智能体的分析结果，提出具体的改进假设。这些假设涵盖了对智能体角色、任务和交互方式的修改建议。例如，如果精细化智能体发现任务分配不合理导致效率低下，假设生成智能体可能会提出改变任务优先级、重新分配任务给更适合的智能体或者增加新的任务协调机制等假设。

修改智能体（Modification Agent）
接到假设生成智能体的假设后，修改智能体就开始“大展身手”了。它负责将这些假设转化为实际的系统变更，调整智能体的逻辑、修改工作流程或者改变智能体之间的依赖关系。这个过程中，它会创造出多个系统变体，每个变体都对应着一种可能的改进方案，并且详细记录下预期的改进效果，方便后续的评估和对比。

执行智能体（Execution Agent）
有了新的系统变体后，执行智能体就登场了。它会运行这些修改后的系统版本，确保智能体们按照新的配置去执行任务，并且收集执行过程中的各种性能数据。它就像是一个严谨的实验员，一丝不苟地记录下每个变体在实际运行中的表现，为后续的评估提供一手资料。

评估智能体（Evaluation Agent）
评估智能体是“裁判员”，它利用LLM来对每个系统变体的输出进行全面评估。评估的维度既包括定性的标准，如输出的清晰度、与任务的相关性、分析的深度和可操作性等，也涵盖定量的指标，比如执行时间、任务完成率和整体系统效率等。它会给出一个综合的评分，指出每个变体的优势和不足，为选择最佳变体提供依据。

选择智能体（Selection Agent）
在评估智能体给出评分后，选择智能体就开始“排排坐，选最佳”了。它会比较新生成的输出和目前已知的最佳变体，根据评估得分进行排名，判断新变体是否更胜一筹。如果新变体表现更好，它就会被选为新的最佳变体，替换掉原来的，这样就能保证系统始终朝着最优的方向进化。

记忆模块（Memory Module）
这个模块就像是系统的“记忆库”，它会存储表现最佳的系统变体及其输出。这样，在后续的迭代过程中，系统就可以参考之前的优秀成果，避免重复走弯路，还能在此基础上继续优化，实现持续的性能提升。

迭代优化流程

了解了各个智能体的分工后，咱们再来看看整个迭代优化流程是怎么运转的。
初始化：一切从一个基础版本的多AI智能体系统开始。这个基础版本的智能体们被赋予了预设的角色、目标和工作流程。系统先运行一遍，产生初始的输出，这些输出就作为后续迭代的参照基准。同时，LLM会分析系统的代码，提取出评估指标，这些指标就像是衡量系统性能的“尺子”，后续的输出都会用这把“尺子”来量一量，看看质量如何。
执行与评估：执行智能体按照基础配置运行系统，智能体们各司其职，完成任务，产生输出。这些输出接着被评估智能体拿去评估，对照着定性和定量的评估标准，打出一个分数。这个分数就反映了系统当前的性能水平。
假设生成与修改：精细化智能体收到评估结果后，开始分析，找出系统可以改进的地方，并且把改进的想法告诉假设生成智能体。假设生成智能体根据这些想法，提出具体的改进假设，然后修改智能体按照这些假设去修改系统，创造出新的变体。
新变体执行与评估：新的系统变体由执行智能体运行，产生新的输出。这些新输出再次被评估智能体评估，打出新的分数。
选择与迭代：选择智能体比较新旧变体的分数，如果新变体得分更高，那就说明它更优秀，就把新变体选为最佳变体，替换掉旧的。然后，系统就以这个新的最佳变体为基础，继续进入下一轮的迭代。如果新变体得分没有旧的好，或者提升的幅度很小，低于预设的一个阈值，那系统就会停止迭代，因为这时候再改来改去意义也不大了。当达到最大迭代次数时，系统也会停止。最终，系统会返回最佳变体及其输出，这个最佳变体就是经过多轮迭代优化后的最优系统版本。

举个更详细的例子吧，假设咱们有一个用于客户服务的多AI智能体系统。一开始，系统的基础版本可能只能回答一些简单的问题，客户满意度一般。在第一轮迭代中，精细化智能体发现智能体在处理复杂问题时反应不够灵敏，于是假设生成智能体提出增加一个专门处理复杂问题的智能体角色，并且调整现有智能体的任务分配。修改智能体根据这个假设修改系统，创造出新变体。新变体运行后，评估智能体发现客户满意度有了明显提升，选择智能体就把这个新变体选为最佳变体。接下来，系统继续迭代，精细化智能体又发现智能体在语言表达上不够自然，于是又一轮的假设生成、修改、评估……经过多轮迭代后，最终的系统版本能够高效、准确、自然地回答各种客户问题，客户满意度大幅提高。

# 参考

[1] AI的自我进化之路：Multi-Agent系统的自主迭代优化, https://mp.weixin.qq.com/s?__biz=Mzk2NDA0MzcxNw==&mid=2247484727&idx=1&sn=9411a74f525e7afe2a8512a4a5ddf7f9&scene=21&poc_token=HBjbomij3GNdv1Zixm_5Sbov3wk23ft3G8-AQ_YC